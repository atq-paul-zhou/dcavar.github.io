<html>
<head>
<title>countwords1f.scm</title>
<style type="text/css"><!--
.syntax0 {
color: #000000;
}
.syntax1 {
color: #cc0000;
}
.syntax2 {
color: #ff8400;
}
.syntax3 {
color: #6600cc;
}
.syntax4 {
color: #cc6600;
}
.syntax5 {
color: #ff0000;
}
.syntax6 {
color: #9966ff;
}
.syntax7 {
background: #ffffcc;
color: #ff0066;
}
.syntax8 {
color: #006699;
font-weight: bold;
}
.syntax9 {
color: #009966;
font-weight: bold;
}
.syntax10 {
color: #0099ff;
font-weight: bold;
}
.syntax11 {
color: #66ccff;
font-weight: bold;
}
.syntax12 {
color: #02b902;
}
.syntax13 {
color: #ff00cc;
}
.syntax14 {
color: #cc00cc;
}
.syntax15 {
color: #9900cc;
}
.syntax16 {
color: #6600cc;
}
.syntax17 {
color: #0000ff;
}
.syntax18 {
color: #000000;
font-weight: bold;
}
.gutter {
background: #dbdbdb;
color: #000000;
}
.gutterH {
background: #dbdbdb;
color: #990066;
}
--></style>
</head>
<body bgcolor="#ffffff">
<pre><span class="syntax0"><span class="gutter">   1:</span><span class="syntax13">&quot;</span><span class="syntax13">:</span><span class="syntax13">&quot;</span><span class="syntax1">;</span><span class="syntax1"> </span><span class="syntax1">exec</span><span class="syntax1"> </span><span class="syntax1">mzscheme</span><span class="syntax1"> </span><span class="syntax1">-r</span><span class="syntax1"> </span><span class="syntax1">$0</span><span class="syntax1"> </span><span class="syntax1">&quot;$@&quot;</span>
<span class="gutter">   2:</span>
<span class="gutter">   3:</span>(require (lib <span class="syntax13">&quot;</span><span class="syntax13">vector-lib.ss</span><span class="syntax13">&quot;</span> <span class="syntax13">&quot;</span><span class="syntax13">srfi</span><span class="syntax13">&quot;</span> <span class="syntax13">&quot;</span><span class="syntax13">43</span><span class="syntax13">&quot;</span>))
<span class="gutter">   4:</span>(require (lib <span class="syntax13">&quot;</span><span class="syntax13">string.ss</span><span class="syntax13">&quot;</span>     <span class="syntax13">&quot;</span><span class="syntax13">srfi</span><span class="syntax13">&quot;</span> <span class="syntax13">&quot;</span><span class="syntax13">13</span><span class="syntax13">&quot;</span>))
<span class="gutterH">   5:</span>
<span class="gutter">   6:</span>
<span class="gutter">   7:</span><span class="syntax1">;</span><span class="syntax1"> </span><span class="syntax1">global</span><span class="syntax1"> </span><span class="syntax1">word</span><span class="syntax1"> </span><span class="syntax1">storage</span>
<span class="gutter">   8:</span>(<span class="syntax8">define</span> words (make-hash-table <span class="syntax13">'</span><span class="syntax13">equal</span>))
<span class="gutter">   9:</span>
<span class="gutterH">  10:</span>
<span class="gutter">  11:</span>(<span class="syntax8">define</span> load-file
<span class="gutter">  12:</span>  (<span class="syntax8">lambda</span> (fname)
<span class="gutter">  13:</span>    (printf <span class="syntax13">&quot;</span><span class="syntax13">Loading</span><span class="syntax13"> </span><span class="syntax13">file:</span><span class="syntax13"> </span><span class="syntax13">~a\n</span><span class="syntax13">&quot;</span> fname)
<span class="gutter">  14:</span>    (<span class="syntax9">call-with-input-file</span> fname
<span class="gutterH">  15:</span>      (<span class="syntax8">lambda</span> (p)
<span class="gutter">  16:</span>        (read-string (file-size fname) p)))))
<span class="gutter">  17:</span>
<span class="gutter">  18:</span>
<span class="gutter">  19:</span>(<span class="syntax8">define</span> count-words
<span class="gutterH">  20:</span>  (<span class="syntax8">lambda</span> (wordlist)
<span class="gutter">  21:</span>    (<span class="syntax9">for-each</span> (<span class="syntax8">lambda</span> (word)
<span class="gutter">  22:</span>                (<span class="syntax8">let</span> ([value (hash-table-get words word <span class="syntax5">0</span>)])
<span class="gutter">  23:</span>                  (hash-table-put! words word (+ value <span class="syntax5">1</span>))))
<span class="gutter">  24:</span>              wordlist)))
<span class="gutterH">  25:</span>
<span class="gutter">  26:</span>
<span class="gutter">  27:</span><span class="syntax1">;</span><span class="syntax1">;;</span><span class="syntax1"> </span><span class="syntax1">main</span><span class="syntax1"> </span><span class="syntax1">steps</span>
<span class="gutter">  28:</span>(<span class="syntax8">begin</span> 
<span class="gutter">  29:</span>  (vector-for-each (<span class="syntax8">lambda</span> (i fname)
<span class="gutterH">  30:</span>                     (count-words (string-tokenize (load-file fname))))
<span class="gutter">  31:</span>                   argv))
</span></pre>

<br/>
<br/>
<br/>
<center>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-8896209246743797";
/* HomePage-DC-small */
google_ad_slot = "9466016636";
google_ad_width = 468;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</center>

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21704386-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>

