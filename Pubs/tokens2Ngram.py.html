<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<title>tokens2Ngram.py</title>
<meta name="syntax" content="python">
<meta name="settings" content="use_css,pre_wrap,expand_tabs">
<style type="text/css">
<!--
pre { white-space: pre-wrap; font-family: monospace; color: #000000; background-color: #ffffff; }
body { font-family: monospace; color: #000000; background-color: #ffffff; }
.Special { color: #8a2be2; }
.Constant { color: #ff8c00; }
.Type { color: #008b00; font-weight: bold; }
.Statement { color: #b03060; font-weight: bold; }
.Identifier { color: #458b74; }
.PreProc { color: #1874cd; }
.String { color: #4a708b; }
.Comment { color: #0000ee; font-style: italic; }
-->
</style>
</head>
<body>
<pre>
<span class="Comment">#!/usr/bin/env python3</span>
<span class="Comment"># -*- coding: utf-8 -*-</span>

<span class="String">&quot;&quot;&quot;</span>
<span class="String">tokens2Ngram.py</span>

<span class="String">Version 0.2</span>

<span class="String">(C) 2010-2012 by Damir Cavar (<a href="http://cavar.me/damir/)">http://cavar.me/damir/</a>)</span>

<span class="String">Simple ngram model generation algorithm.</span>
<span class="String">Requires as input a token list generated by the tokenizer.py script.</span>
<span class="String">Generates a CSV frequency profile of N-grams, where the N-gram can be</span>
<span class="String">a string or itemized. It can also generate a tab-delimited N-gram</span>
<span class="String">frequency profile, with the N-gram being a string and space delimted,</span>
<span class="String">or itemized and tab-delimited. The N-gram model can be filtered:</span>
<span class="String">a. all N-grams that contain stop-words, and</span>
<span class="String">b. all N-grams that contain puntuation marks can be eliminated</span>
<span class="String">   from the putput.</span>
<span class="String">&quot;&quot;&quot;</span>


<span class="PreProc">import</span> sys, os, os.path, glob, getopt, codecs, re

<span class="String">&quot;&quot;&quot;</span>
<span class="String">Fix output for Windows and Komodo Edit...</span>
<span class="String">if you have problems with the encoding of the output when</span>
<span class="String">piping it on Windows to some file, try to set the system</span>
<span class="String">variable PYTHONIOENCODING to utf-8 (also possible solution</span>
<span class="String">on Mac or Linux. Or try by uncommenting the following line</span>
<span class="String">&quot;&quot;&quot;</span>
<span class="Comment">#sys.stdout = codecs.getwriter('utf-8')(sys.stdout.detach())</span>


stpwdict = <span class="Identifier">set</span>( (<span class="String">&quot;a&quot;</span>,<span class="String">&quot;a's&quot;</span>,<span class="String">&quot;able&quot;</span>,<span class="String">&quot;about&quot;</span>,<span class="String">&quot;above&quot;</span>,<span class="String">&quot;according&quot;</span>,<span class="String">&quot;accordingly&quot;</span>,
                 <span class="String">&quot;across&quot;</span>,<span class="String">&quot;actually&quot;</span>,<span class="String">&quot;after&quot;</span>,<span class="String">&quot;afterwards&quot;</span>,<span class="String">&quot;again&quot;</span>,<span class="String">&quot;against&quot;</span>,
                 <span class="String">&quot;ain't&quot;</span>,<span class="String">&quot;all&quot;</span>,<span class="String">&quot;allow&quot;</span>,<span class="String">&quot;allows&quot;</span>,<span class="String">&quot;almost&quot;</span>,<span class="String">&quot;alone&quot;</span>,<span class="String">&quot;along&quot;</span>,
                 <span class="String">&quot;already&quot;</span>,<span class="String">&quot;also&quot;</span>,<span class="String">&quot;although&quot;</span>,<span class="String">&quot;always&quot;</span>,<span class="String">&quot;am&quot;</span>,<span class="String">&quot;among&quot;</span>,<span class="String">&quot;amongst&quot;</span>,
                 <span class="String">&quot;an&quot;</span>,<span class="String">&quot;and&quot;</span>,<span class="String">&quot;another&quot;</span>,<span class="String">&quot;any&quot;</span>,<span class="String">&quot;anybody&quot;</span>,<span class="String">&quot;anyhow&quot;</span>,<span class="String">&quot;anyone&quot;</span>,
                 <span class="String">&quot;anything&quot;</span>,<span class="String">&quot;anyway&quot;</span>,<span class="String">&quot;anyways&quot;</span>,<span class="String">&quot;anywhere&quot;</span>,<span class="String">&quot;apart&quot;</span>,<span class="String">&quot;appear&quot;</span>,
                 <span class="String">&quot;appreciate&quot;</span>,<span class="String">&quot;appropriate&quot;</span>,<span class="String">&quot;are&quot;</span>,<span class="String">&quot;aren't&quot;</span>,<span class="String">&quot;around&quot;</span>,<span class="String">&quot;as&quot;</span>,
                 <span class="String">&quot;aside&quot;</span>,<span class="String">&quot;ask&quot;</span>,<span class="String">&quot;asking&quot;</span>,<span class="String">&quot;associated&quot;</span>,<span class="String">&quot;at&quot;</span>,<span class="String">&quot;available&quot;</span>,<span class="String">&quot;away&quot;</span>,
                 <span class="String">&quot;awfully&quot;</span>,<span class="String">&quot;be&quot;</span>,<span class="String">&quot;became&quot;</span>,<span class="String">&quot;because&quot;</span>,<span class="String">&quot;become&quot;</span>,<span class="String">&quot;becomes&quot;</span>,
                 <span class="String">&quot;becoming&quot;</span>,<span class="String">&quot;been&quot;</span>,<span class="String">&quot;before&quot;</span>,<span class="String">&quot;beforehand&quot;</span>,<span class="String">&quot;behind&quot;</span>,<span class="String">&quot;being&quot;</span>,
                 <span class="String">&quot;believe&quot;</span>,<span class="String">&quot;below&quot;</span>,<span class="String">&quot;beside&quot;</span>,<span class="String">&quot;besides&quot;</span>,<span class="String">&quot;best&quot;</span>,<span class="String">&quot;better&quot;</span>,
                 <span class="String">&quot;between&quot;</span>,<span class="String">&quot;beyond&quot;</span>,<span class="String">&quot;both&quot;</span>,<span class="String">&quot;brief&quot;</span>,<span class="String">&quot;but&quot;</span>,<span class="String">&quot;by&quot;</span>,<span class="String">&quot;c'mon&quot;</span>,
                 <span class="String">&quot;c's&quot;</span>,<span class="String">&quot;came&quot;</span>,<span class="String">&quot;can&quot;</span>,<span class="String">&quot;can't&quot;</span>,<span class="String">&quot;cannot&quot;</span>,<span class="String">&quot;cant&quot;</span>,<span class="String">&quot;cause&quot;</span>,
                 <span class="String">&quot;causes&quot;</span>,<span class="String">&quot;certain&quot;</span>,<span class="String">&quot;certainly&quot;</span>,<span class="String">&quot;changes&quot;</span>,<span class="String">&quot;clearly&quot;</span>,
                 <span class="String">&quot;co&quot;</span>,<span class="String">&quot;com&quot;</span>,<span class="String">&quot;come&quot;</span>,<span class="String">&quot;comes&quot;</span>,<span class="String">&quot;concerning&quot;</span>,<span class="String">&quot;consequently&quot;</span>,
                 <span class="String">&quot;consider&quot;</span>,<span class="String">&quot;considering&quot;</span>,<span class="String">&quot;contain&quot;</span>,<span class="String">&quot;containing&quot;</span>,<span class="String">&quot;contains&quot;</span>,
                 <span class="String">&quot;corresponding&quot;</span>,<span class="String">&quot;could&quot;</span>,<span class="String">&quot;couldn't&quot;</span>,<span class="String">&quot;course&quot;</span>,<span class="String">&quot;currently&quot;</span>,
                 <span class="String">&quot;definitely&quot;</span>,<span class="String">&quot;described&quot;</span>,<span class="String">&quot;despite&quot;</span>,<span class="String">&quot;did&quot;</span>,<span class="String">&quot;didn't&quot;</span>,
                 <span class="String">&quot;different&quot;</span>,<span class="String">&quot;do&quot;</span>,<span class="String">&quot;does&quot;</span>,<span class="String">&quot;doesn't&quot;</span>,<span class="String">&quot;doing&quot;</span>,<span class="String">&quot;don't&quot;</span>,<span class="String">&quot;done&quot;</span>,
                 <span class="String">&quot;down&quot;</span>,<span class="String">&quot;downwards&quot;</span>,<span class="String">&quot;during&quot;</span>,<span class="String">&quot;each&quot;</span>,<span class="String">&quot;edu&quot;</span>,<span class="String">&quot;eg&quot;</span>,<span class="String">&quot;eight&quot;</span>,
                 <span class="String">&quot;either&quot;</span>,<span class="String">&quot;else&quot;</span>,<span class="String">&quot;elsewhere&quot;</span>,<span class="String">&quot;enough&quot;</span>,<span class="String">&quot;entirely&quot;</span>,<span class="String">&quot;especially&quot;</span>,
                 <span class="String">&quot;et&quot;</span>,<span class="String">&quot;etc&quot;</span>,<span class="String">&quot;even&quot;</span>,<span class="String">&quot;ever&quot;</span>,<span class="String">&quot;every&quot;</span>,<span class="String">&quot;everybody&quot;</span>,<span class="String">&quot;everyone&quot;</span>,
                 <span class="String">&quot;everything&quot;</span>,<span class="String">&quot;everywhere&quot;</span>,<span class="String">&quot;ex&quot;</span>,<span class="String">&quot;exactly&quot;</span>,<span class="String">&quot;example&quot;</span>,<span class="String">&quot;except&quot;</span>,
                 <span class="String">&quot;far&quot;</span>,<span class="String">&quot;few&quot;</span>,<span class="String">&quot;fifth&quot;</span>,<span class="String">&quot;first&quot;</span>,<span class="String">&quot;five&quot;</span>,<span class="String">&quot;followed&quot;</span>,<span class="String">&quot;following&quot;</span>,
                 <span class="String">&quot;follows&quot;</span>,<span class="String">&quot;for&quot;</span>,<span class="String">&quot;former&quot;</span>,<span class="String">&quot;formerly&quot;</span>,<span class="String">&quot;forth&quot;</span>,<span class="String">&quot;four&quot;</span>,<span class="String">&quot;from&quot;</span>,
                 <span class="String">&quot;further&quot;</span>,<span class="String">&quot;furthermore&quot;</span>,<span class="String">&quot;get&quot;</span>,<span class="String">&quot;gets&quot;</span>,<span class="String">&quot;getting&quot;</span>,<span class="String">&quot;given&quot;</span>,
                 <span class="String">&quot;gives&quot;</span>,<span class="String">&quot;go&quot;</span>,<span class="String">&quot;goes&quot;</span>,<span class="String">&quot;going&quot;</span>,<span class="String">&quot;gone&quot;</span>,<span class="String">&quot;got&quot;</span>,<span class="String">&quot;gotten&quot;</span>,
                 <span class="String">&quot;greetings&quot;</span>,<span class="String">&quot;had&quot;</span>,<span class="String">&quot;hadn't&quot;</span>,<span class="String">&quot;happens&quot;</span>,<span class="String">&quot;hardly&quot;</span>,<span class="String">&quot;has&quot;</span>,
                 <span class="String">&quot;hasn't&quot;</span>,<span class="String">&quot;have&quot;</span>,<span class="String">&quot;haven't&quot;</span>,<span class="String">&quot;having&quot;</span>,<span class="String">&quot;he&quot;</span>,<span class="String">&quot;he's&quot;</span>,<span class="String">&quot;hello&quot;</span>,
                 <span class="String">&quot;help&quot;</span>,<span class="String">&quot;hence&quot;</span>,<span class="String">&quot;her&quot;</span>,<span class="String">&quot;here&quot;</span>,<span class="String">&quot;here's&quot;</span>,<span class="String">&quot;hereafter&quot;</span>,<span class="String">&quot;hereby&quot;</span>,
                 <span class="String">&quot;herein&quot;</span>,<span class="String">&quot;hereupon&quot;</span>,<span class="String">&quot;hers&quot;</span>,<span class="String">&quot;herself&quot;</span>,<span class="String">&quot;hi&quot;</span>,<span class="String">&quot;him&quot;</span>,<span class="String">&quot;himself&quot;</span>,
                 <span class="String">&quot;his&quot;</span>,<span class="String">&quot;hither&quot;</span>,<span class="String">&quot;hopefully&quot;</span>,<span class="String">&quot;how&quot;</span>,<span class="String">&quot;howbeit&quot;</span>,<span class="String">&quot;however&quot;</span>,<span class="String">&quot;i'd&quot;</span>,
                 <span class="String">&quot;s&quot;</span>,<span class="String">&quot;i&quot;</span>,<span class="String">&quot;it&quot;</span>,<span class="String">&quot;I&quot;</span>,<span class="String">&quot;It&quot;</span>,<span class="String">&quot;The&quot;</span>,<span class="String">&quot;A&quot;</span>,<span class="String">&quot;i'll&quot;</span>,<span class="String">&quot;i'm&quot;</span>,<span class="String">&quot;i've&quot;</span>,<span class="String">&quot;ie&quot;</span>,<span class="String">&quot;if&quot;</span>,
                 <span class="String">&quot;ignored&quot;</span>,<span class="String">&quot;immediate&quot;</span>,<span class="String">&quot;in&quot;</span>,
                 <span class="String">&quot;inasmuch&quot;</span>,<span class="String">&quot;inc&quot;</span>,<span class="String">&quot;indeed&quot;</span>,<span class="String">&quot;indicate&quot;</span>,<span class="String">&quot;indicated&quot;</span>,<span class="String">&quot;indicates&quot;</span>,
                 <span class="String">&quot;inner&quot;</span>,<span class="String">&quot;insofar&quot;</span>,<span class="String">&quot;instead&quot;</span>,<span class="String">&quot;into&quot;</span>,<span class="String">&quot;inward&quot;</span>,<span class="String">&quot;is&quot;</span>,<span class="String">&quot;isn't&quot;</span>,<span class="String">&quot;it&quot;</span>,
                 <span class="String">&quot;it'd&quot;</span>,<span class="String">&quot;it'll&quot;</span>,<span class="String">&quot;it's&quot;</span>,<span class="String">&quot;its&quot;</span>,<span class="String">&quot;itself&quot;</span>,<span class="String">&quot;just&quot;</span>,<span class="String">&quot;keep&quot;</span>,<span class="String">&quot;keeps&quot;</span>,
                 <span class="String">&quot;kept&quot;</span>,<span class="String">&quot;know&quot;</span>,<span class="String">&quot;known&quot;</span>,<span class="String">&quot;knows&quot;</span>,<span class="String">&quot;last&quot;</span>,<span class="String">&quot;lately&quot;</span>,<span class="String">&quot;later&quot;</span>,<span class="String">&quot;latter&quot;</span>,
                 <span class="String">&quot;latterly&quot;</span>,<span class="String">&quot;least&quot;</span>,<span class="String">&quot;less&quot;</span>,<span class="String">&quot;lest&quot;</span>,<span class="String">&quot;let&quot;</span>,<span class="String">&quot;let's&quot;</span>,<span class="String">&quot;like&quot;</span>,<span class="String">&quot;liked&quot;</span>,
                 <span class="String">&quot;likely&quot;</span>,<span class="String">&quot;little&quot;</span>,<span class="String">&quot;look&quot;</span>,<span class="String">&quot;looking&quot;</span>,<span class="String">&quot;looks&quot;</span>,<span class="String">&quot;ltd&quot;</span>,<span class="String">&quot;mainly&quot;</span>,
                 <span class="String">&quot;many&quot;</span>,<span class="String">&quot;may&quot;</span>,<span class="String">&quot;maybe&quot;</span>,<span class="String">&quot;me&quot;</span>,<span class="String">&quot;mean&quot;</span>,<span class="String">&quot;meanwhile&quot;</span>,<span class="String">&quot;merely&quot;</span>,<span class="String">&quot;might&quot;</span>,
                 <span class="String">&quot;more&quot;</span>,<span class="String">&quot;moreover&quot;</span>,<span class="String">&quot;most&quot;</span>,<span class="String">&quot;mostly&quot;</span>,<span class="String">&quot;much&quot;</span>,<span class="String">&quot;must&quot;</span>,<span class="String">&quot;my&quot;</span>,<span class="String">&quot;myself&quot;</span>,
                 <span class="String">&quot;name&quot;</span>,<span class="String">&quot;namely&quot;</span>,<span class="String">&quot;nd&quot;</span>,<span class="String">&quot;near&quot;</span>,<span class="String">&quot;nearly&quot;</span>,<span class="String">&quot;necessary&quot;</span>,<span class="String">&quot;need&quot;</span>,
                 <span class="String">&quot;needs&quot;</span>,<span class="String">&quot;neither&quot;</span>,<span class="String">&quot;never&quot;</span>,<span class="String">&quot;nevertheless&quot;</span>,<span class="String">&quot;new&quot;</span>,<span class="String">&quot;next&quot;</span>,<span class="String">&quot;nine&quot;</span>,
                 <span class="String">&quot;no&quot;</span>,<span class="String">&quot;nobody&quot;</span>,<span class="String">&quot;non&quot;</span>,<span class="String">&quot;none&quot;</span>,<span class="String">&quot;noone&quot;</span>,<span class="String">&quot;nor&quot;</span>,<span class="String">&quot;normally&quot;</span>,<span class="String">&quot;not&quot;</span>,
                 <span class="String">&quot;nothing&quot;</span>,<span class="String">&quot;novel&quot;</span>,<span class="String">&quot;now&quot;</span>,<span class="String">&quot;nowhere&quot;</span>,<span class="String">&quot;obviously&quot;</span>,<span class="String">&quot;of&quot;</span>,<span class="String">&quot;off&quot;</span>,
                 <span class="String">&quot;often&quot;</span>,<span class="String">&quot;oh&quot;</span>,<span class="String">&quot;ok&quot;</span>,<span class="String">&quot;okay&quot;</span>,<span class="String">&quot;old&quot;</span>,<span class="String">&quot;on&quot;</span>,<span class="String">&quot;once&quot;</span>,<span class="String">&quot;one&quot;</span>,<span class="String">&quot;ones&quot;</span>,
                 <span class="String">&quot;only&quot;</span>,<span class="String">&quot;onto&quot;</span>,<span class="String">&quot;or&quot;</span>,<span class="String">&quot;other&quot;</span>,<span class="String">&quot;others&quot;</span>,<span class="String">&quot;otherwise&quot;</span>,<span class="String">&quot;ought&quot;</span>,
                 <span class="String">&quot;our&quot;</span>,<span class="String">&quot;ours&quot;</span>,<span class="String">&quot;ourselves&quot;</span>,<span class="String">&quot;out&quot;</span>,<span class="String">&quot;outside&quot;</span>,<span class="String">&quot;over&quot;</span>,<span class="String">&quot;overall&quot;</span>,
                 <span class="String">&quot;own&quot;</span>,<span class="String">&quot;particular&quot;</span>,<span class="String">&quot;particularly&quot;</span>,<span class="String">&quot;per&quot;</span>,<span class="String">&quot;perhaps&quot;</span>,<span class="String">&quot;placed&quot;</span>,
                 <span class="String">&quot;please&quot;</span>,<span class="String">&quot;plus&quot;</span>,<span class="String">&quot;possible&quot;</span>,<span class="String">&quot;presumably&quot;</span>,<span class="String">&quot;probably&quot;</span>,
                 <span class="String">&quot;provides&quot;</span>,<span class="String">&quot;que&quot;</span>,<span class="String">&quot;quite&quot;</span>,<span class="String">&quot;qv&quot;</span>,<span class="String">&quot;rather&quot;</span>,<span class="String">&quot;rd&quot;</span>,<span class="String">&quot;re&quot;</span>,
                 <span class="String">&quot;really&quot;</span>,<span class="String">&quot;reasonably&quot;</span>,<span class="String">&quot;regarding&quot;</span>,<span class="String">&quot;regardless&quot;</span>,<span class="String">&quot;regards&quot;</span>,
                 <span class="String">&quot;relatively&quot;</span>,<span class="String">&quot;respectively&quot;</span>,<span class="String">&quot;right&quot;</span>,<span class="String">&quot;said&quot;</span>,<span class="String">&quot;same&quot;</span>,<span class="String">&quot;saw&quot;</span>,
                 <span class="String">&quot;say&quot;</span>,<span class="String">&quot;saying&quot;</span>,<span class="String">&quot;says&quot;</span>,<span class="String">&quot;second&quot;</span>,<span class="String">&quot;secondly&quot;</span>,<span class="String">&quot;see&quot;</span>,<span class="String">&quot;seeing&quot;</span>,
                 <span class="String">&quot;seem&quot;</span>,<span class="String">&quot;seemed&quot;</span>,<span class="String">&quot;seeming&quot;</span>,<span class="String">&quot;seems&quot;</span>,<span class="String">&quot;seen&quot;</span>,<span class="String">&quot;self&quot;</span>,<span class="String">&quot;selves&quot;</span>,
                 <span class="String">&quot;sensible&quot;</span>,<span class="String">&quot;sent&quot;</span>,<span class="String">&quot;serious&quot;</span>,<span class="String">&quot;seriously&quot;</span>,<span class="String">&quot;seven&quot;</span>,<span class="String">&quot;several&quot;</span>,
                 <span class="String">&quot;shall&quot;</span>,<span class="String">&quot;she&quot;</span>,<span class="String">&quot;should&quot;</span>,<span class="String">&quot;shouldn't&quot;</span>,<span class="String">&quot;since&quot;</span>,<span class="String">&quot;six&quot;</span>,<span class="String">&quot;so&quot;</span>,
                 <span class="String">&quot;some&quot;</span>,<span class="String">&quot;somebody&quot;</span>,<span class="String">&quot;somehow&quot;</span>,<span class="String">&quot;someone&quot;</span>,<span class="String">&quot;something&quot;</span>,
                 <span class="String">&quot;sometime&quot;</span>,<span class="String">&quot;sometimes&quot;</span>,<span class="String">&quot;somewhat&quot;</span>,<span class="String">&quot;somewhere&quot;</span>,<span class="String">&quot;soon&quot;</span>,
                 <span class="String">&quot;sorry&quot;</span>,<span class="String">&quot;specified&quot;</span>,<span class="String">&quot;specify&quot;</span>,<span class="String">&quot;specifying&quot;</span>,<span class="String">&quot;still&quot;</span>,<span class="String">&quot;sub&quot;</span>,
                 <span class="String">&quot;such&quot;</span>,<span class="String">&quot;sup&quot;</span>,<span class="String">&quot;sure&quot;</span>,<span class="String">&quot;t's&quot;</span>,<span class="String">&quot;take&quot;</span>,<span class="String">&quot;taken&quot;</span>,<span class="String">&quot;tell&quot;</span>,<span class="String">&quot;tends&quot;</span>,
                 <span class="String">&quot;th&quot;</span>,<span class="String">&quot;than&quot;</span>,<span class="String">&quot;thank&quot;</span>,<span class="String">&quot;thanks&quot;</span>,<span class="String">&quot;thanx&quot;</span>,<span class="String">&quot;that&quot;</span>,<span class="String">&quot;that's&quot;</span>,<span class="String">&quot;thats&quot;</span>,
                 <span class="String">&quot;the&quot;</span>,<span class="String">&quot;their&quot;</span>,<span class="String">&quot;theirs&quot;</span>,<span class="String">&quot;them&quot;</span>,<span class="String">&quot;themselves&quot;</span>,<span class="String">&quot;then&quot;</span>,<span class="String">&quot;thence&quot;</span>,
                 <span class="String">&quot;there&quot;</span>,<span class="String">&quot;there's&quot;</span>,<span class="String">&quot;thereafter&quot;</span>,<span class="String">&quot;thereby&quot;</span>,<span class="String">&quot;therefore&quot;</span>,<span class="String">&quot;therein&quot;</span>,
                 <span class="String">&quot;theres&quot;</span>,<span class="String">&quot;thereupon&quot;</span>,<span class="String">&quot;these&quot;</span>,<span class="String">&quot;they&quot;</span>,<span class="String">&quot;they'd&quot;</span>,<span class="String">&quot;they'll&quot;</span>,
                 <span class="String">&quot;they're&quot;</span>,<span class="String">&quot;they've&quot;</span>,<span class="String">&quot;think&quot;</span>,<span class="String">&quot;third&quot;</span>,<span class="String">&quot;this&quot;</span>,<span class="String">&quot;thorough&quot;</span>,<span class="String">&quot;thoroughly&quot;</span>,
                 <span class="String">&quot;those&quot;</span>,<span class="String">&quot;though&quot;</span>,<span class="String">&quot;three&quot;</span>,<span class="String">&quot;through&quot;</span>,<span class="String">&quot;throughout&quot;</span>,<span class="String">&quot;thru&quot;</span>,<span class="String">&quot;thus&quot;</span>,
                 <span class="String">&quot;to&quot;</span>,<span class="String">&quot;together&quot;</span>,<span class="String">&quot;too&quot;</span>,<span class="String">&quot;took&quot;</span>,<span class="String">&quot;toward&quot;</span>,<span class="String">&quot;towards&quot;</span>,<span class="String">&quot;tried&quot;</span>,<span class="String">&quot;tries&quot;</span>,
                 <span class="String">&quot;truly&quot;</span>,<span class="String">&quot;try&quot;</span>,<span class="String">&quot;trying&quot;</span>,<span class="String">&quot;twice&quot;</span>,<span class="String">&quot;two&quot;</span>,<span class="String">&quot;un&quot;</span>,<span class="String">&quot;under&quot;</span>,<span class="String">&quot;unfortunately&quot;</span>,
                 <span class="String">&quot;unless&quot;</span>,<span class="String">&quot;unlikely&quot;</span>,<span class="String">&quot;until&quot;</span>,<span class="String">&quot;unto&quot;</span>,<span class="String">&quot;up&quot;</span>,<span class="String">&quot;upon&quot;</span>,<span class="String">&quot;us&quot;</span>,<span class="String">&quot;use&quot;</span>,<span class="String">&quot;used&quot;</span>,
                 <span class="String">&quot;useful&quot;</span>,<span class="String">&quot;uses&quot;</span>,<span class="String">&quot;using&quot;</span>,<span class="String">&quot;usually&quot;</span>,<span class="String">&quot;value&quot;</span>,<span class="String">&quot;various&quot;</span>,<span class="String">&quot;very&quot;</span>,<span class="String">&quot;via&quot;</span>,
                 <span class="String">&quot;viz&quot;</span>,<span class="String">&quot;vs&quot;</span>,<span class="String">&quot;want&quot;</span>,<span class="String">&quot;wants&quot;</span>,<span class="String">&quot;was&quot;</span>,<span class="String">&quot;wasn't&quot;</span>,<span class="String">&quot;way&quot;</span>,<span class="String">&quot;we&quot;</span>,<span class="String">&quot;we'd&quot;</span>,<span class="String">&quot;we'll&quot;</span>,
                 <span class="String">&quot;we're&quot;</span>,<span class="String">&quot;we've&quot;</span>,<span class="String">&quot;welcome&quot;</span>,<span class="String">&quot;well&quot;</span>,<span class="String">&quot;went&quot;</span>,<span class="String">&quot;were&quot;</span>,<span class="String">&quot;weren't&quot;</span>,<span class="String">&quot;what&quot;</span>,
                 <span class="String">&quot;what's&quot;</span>,<span class="String">&quot;whatever&quot;</span>,<span class="String">&quot;when&quot;</span>,<span class="String">&quot;whence&quot;</span>,<span class="String">&quot;whenever&quot;</span>,<span class="String">&quot;where&quot;</span>,<span class="String">&quot;where's&quot;</span>,
                 <span class="String">&quot;whereafter&quot;</span>,<span class="String">&quot;whereas&quot;</span>,<span class="String">&quot;whereby&quot;</span>,<span class="String">&quot;wherein&quot;</span>,<span class="String">&quot;whereupon&quot;</span>,<span class="String">&quot;wherever&quot;</span>,
                 <span class="String">&quot;whether&quot;</span>,<span class="String">&quot;which&quot;</span>,<span class="String">&quot;while&quot;</span>,<span class="String">&quot;whither&quot;</span>,<span class="String">&quot;who&quot;</span>,<span class="String">&quot;who's&quot;</span>,<span class="String">&quot;whoever&quot;</span>,
                 <span class="String">&quot;whole&quot;</span>,<span class="String">&quot;whom&quot;</span>,<span class="String">&quot;whose&quot;</span>,<span class="String">&quot;why&quot;</span>,<span class="String">&quot;will&quot;</span>,<span class="String">&quot;willing&quot;</span>,<span class="String">&quot;wish&quot;</span>,<span class="String">&quot;with&quot;</span>,
                 <span class="String">&quot;within&quot;</span>,<span class="String">&quot;without&quot;</span>,<span class="String">&quot;won't&quot;</span>,<span class="String">&quot;wonder&quot;</span>,<span class="String">&quot;would&quot;</span>,<span class="String">&quot;wouldn't&quot;</span>,<span class="String">&quot;yes&quot;</span>,
                 <span class="String">&quot;yet&quot;</span>,<span class="String">&quot;you&quot;</span>,<span class="String">&quot;you'd&quot;</span>,<span class="String">&quot;you'll&quot;</span>,<span class="String">&quot;you're&quot;</span>,<span class="String">&quot;you've&quot;</span>,<span class="String">&quot;your&quot;</span>,<span class="String">&quot;yours&quot;</span>,
                 <span class="String">&quot;yourself&quot;</span>,<span class="String">&quot;yourselves&quot;</span>,<span class="String">&quot;zero&quot;</span>) )

regnonw = re.<span class="Identifier">compile</span>(<span class="String">&quot;\W+&quot;</span>)

<span class="Statement">def</span> <span class="Identifier">main</span>(fname, model, n):
   <span class="String">&quot;&quot;&quot;main is a procedure that generates an N-gram model given a token list.&quot;&quot;&quot;</span>

   <span class="Statement">if</span> <span class="Statement">not</span> os.path.isfile(fname):
      <span class="Statement">return</span>
   <span class="Statement">try</span>:
      inStream = <span class="Identifier">open</span>(fname, mode=<span class="String">&quot;r&quot;</span>, encoding=<span class="String">&quot;utf-8&quot;</span>)
      tokens = <span class="Identifier">tuple</span>(inStream.read().split())
      inStream.close()
   <span class="Statement">except</span> <span class="Type">IOError</span>:
      <span class="Identifier">print</span>(<span class="String">&quot;Cannot read from file:&quot;</span>, fname)
   <span class="Statement">for</span> i <span class="Statement">in</span> <span class="Identifier">range</span>(<span class="Identifier">len</span>(tokens) - (n - <span class="Constant">1</span>)):
      model[tokens[i:i+n]] = model.get(tokens[i:i+n], <span class="Constant">0</span>) + <span class="Constant">1</span>


<span class="Statement">def</span> <span class="Identifier">prettyPrint</span>(model, outputstring, tabdelimited, ltokens, rtokens, ctokens, stopwords, punctuation):
   <span class="String">&quot;&quot;&quot;Print the N-gram model as specified in the parameters.&quot;&quot;&quot;</span>

   <span class="Statement">for</span> i <span class="Statement">in</span> model:
      tok = ( x.replace(<span class="String">'&quot;'</span>, <span class="String">'&quot;&quot;'</span>) <span class="Statement">for</span> x <span class="Statement">in</span>  i)
      tokens = ( t.replace(<span class="String">'&quot;'</span>, <span class="String">'&quot;&quot;'</span>) <span class="Statement">for</span> t <span class="Statement">in</span> i )
      ltokenprint = <span class="Identifier">False</span>
      rtokenprint = <span class="Identifier">False</span>
      ctokenprint = <span class="Identifier">False</span>
      stwdprint = <span class="Identifier">True</span>
      punctuationprint = <span class="Identifier">True</span>

      <span class="Statement">if</span> i[<span class="Constant">0</span>] <span class="Statement">in</span> ltokens <span class="Statement">or</span> <span class="Identifier">len</span>(ltokens) == <span class="Constant">0</span>:
         ltokenprint = <span class="Identifier">True</span>
      <span class="Statement">if</span> i[-<span class="Constant">1</span>] <span class="Statement">in</span> rtokens <span class="Statement">or</span> <span class="Identifier">len</span>(rtokens) == <span class="Constant">0</span>:
         rtokenprint = <span class="Identifier">True</span>

      <span class="Statement">if</span> <span class="Identifier">len</span>(ctokens) == <span class="Constant">0</span>:
         ctokenprint = <span class="Identifier">True</span>

      <span class="Statement">for</span> x <span class="Statement">in</span> i:
         <span class="Statement">if</span> stopwords:
            <span class="Statement">if</span> x.lower() <span class="Statement">in</span> stpwdict:
               stwdprint = <span class="Identifier">False</span>
         <span class="Statement">if</span> x <span class="Statement">in</span> ctokens:
            ctokenprint = <span class="Identifier">True</span>
         <span class="Statement">if</span> punctuation:
            <span class="Statement">if</span> regnonw.match(x):
               punctuationprint = <span class="Identifier">False</span>

      <span class="Statement">if</span> ltokenprint <span class="Statement">and</span> rtokenprint <span class="Statement">and</span> ctokenprint <span class="Statement">and</span> stwdprint <span class="Statement">and</span> punctuationprint:
         <span class="Statement">if</span> tabdelimited: <span class="Comment"># output is tab-delimited</span>
            <span class="Statement">if</span> outputstring:
               <span class="Identifier">print</span>(<span class="String">&quot; &quot;</span>.join(tokens), model[i], sep=<span class="String">&quot;</span><span class="Special">\t</span><span class="String">&quot;</span>, <span class="Identifier">file</span>=sys.stdout)
            <span class="Statement">else</span>:
               <span class="Identifier">print</span>(<span class="String">&quot;</span><span class="Special">\t</span><span class="String">&quot;</span>.join(tokens), model[i], sep=<span class="String">&quot;</span><span class="Special">\t</span><span class="String">&quot;</span>, <span class="Identifier">file</span>=sys.stdout)
         <span class="Statement">else</span>: <span class="Comment"># output is CSV</span>
            <span class="Statement">if</span> outputstring:
               <span class="Identifier">print</span>(<span class="String">'&quot;'</span> + <span class="String">&quot; &quot;</span>.join(tokens) + <span class="String">'&quot;'</span>, model[i], sep=<span class="String">&quot;,&quot;</span>, end=<span class="String">&quot;</span><span class="Special">\r\n</span><span class="String">&quot;</span>, <span class="Identifier">file</span>=sys.stdout)
            <span class="Statement">else</span>:
               <span class="Identifier">print</span>(<span class="String">'&quot;'</span> + <span class="String">&quot;</span><span class="Special">\&quot;</span><span class="String">,</span><span class="Special">\&quot;</span><span class="String">&quot;</span>.join(tokens) + <span class="String">'&quot;'</span>, model[i], sep=<span class="String">&quot;,&quot;</span>, end=<span class="String">&quot;</span><span class="Special">\r\n</span><span class="String">&quot;</span>, <span class="Identifier">file</span>=sys.stdout)


<span class="Statement">def</span> <span class="Identifier">usage</span>():
   <span class="Identifier">print</span>(<span class="String">&quot;&quot;&quot;</span>
<span class="String">tokens2Ngram.py</span>
<span class="String">-n number -- number is integer for length of N-grams, e.g. -n 2 for bigrams</span>
<span class="String">-i        -- itemize ngram rather than ngram as string space delimited,</span>
<span class="String">             e.g. -i will activate output: &quot;the&quot;,&quot;house&quot;,4</span>
<span class="String">-t        -- tab-delimited output, activates output: the</span><span class="Special">\t</span><span class="String">house</span><span class="Special">\t</span><span class="String">4</span>
<span class="String">-l token  -- show only ngrams that have token as left token</span>
<span class="String">-r token  -- show only ngrams that have token as right token</span>
<span class="String">-c token  -- show only ngrams that contain token</span>
<span class="String">-s        -- filter out ngrams that contain stopwords</span>
<span class="String">-p        -- filter out ngrams that contain punctuation symbols</span>

<span class="String">Your Python 3 interpreter might be called python rather than python3 on Windows.</span>
<span class="String">It might be called python3.2 on Macs. Change the example commandlines appropriately.</span>

<span class="String">Example:</span>
<span class="String">python3 tokens2Ngram.py -n 4 -t mytext.txt</span>
<span class="String">or, if the script is made executable:</span>
<span class="String">./tokens2Ngram.py -n 4 -t mytext.txt</span>

<span class="String">To show ngrams that have &quot;the&quot; as the left token and &quot;of&quot; as the right token:</span>
<span class="String">./tokens2Ngram.py -n 3 -l the -r of mytext.txt</span>

<span class="String">To show ngrams that have &quot;the&quot; or &quot;a&quot; as the left token:</span>
<span class="String">./tokens2Ngram.py -n 3 -l the -l a mytext.txt</span>
<span class="String">&quot;&quot;&quot;</span>)


<span class="Statement">if</span> __name__ == <span class="String">'__main__'</span>:
   <span class="Statement">try</span>:
      opts, args = getopt.getopt(sys.argv[<span class="Constant">1</span>:], <span class="String">&quot;hitl:r:n:c:spv&quot;</span>, [<span class="String">&quot;help&quot;</span>, <span class="String">&quot;number=&quot;</span>, <span class="String">&quot;itemngram&quot;</span>, <span class="String">&quot;tabdelimited&quot;</span>, <span class="String">&quot;lefttoken&quot;</span>, <span class="String">&quot;righttoken&quot;</span>, <span class="String">&quot;containstoken&quot;</span>, <span class="String">&quot;verbose&quot;</span>, <span class="String">&quot;stopwords&quot;</span>, <span class="String">&quot;punctuation&quot;</span>])
   <span class="Statement">except</span> getopt.GetoptError <span class="Statement">as</span> err:
      <span class="Identifier">print</span>(err) <span class="Comment"># will print something like &quot;option -a not recognized&quot;</span>
      sys.exit(<span class="Constant">2</span>)
   n = <span class="Constant">2</span>
   verbose = <span class="Identifier">False</span>
   outputstring = <span class="Identifier">True</span>
   tabdelimited = <span class="Identifier">False</span>
   stopwords = <span class="Identifier">False</span>
   punctuation = <span class="Identifier">False</span>
   ltokens = []
   rtokens = []
   ctokens = []
   <span class="Statement">for</span> o, a <span class="Statement">in</span> opts:
      <span class="Statement">if</span> o <span class="Statement">in</span> (<span class="String">&quot;-v&quot;</span>, <span class="String">&quot;--verbose&quot;</span>):
         verbose = <span class="Identifier">True</span>
      <span class="Statement">elif</span> o <span class="Statement">in</span> (<span class="String">&quot;-i&quot;</span>, <span class="String">&quot;--itemngram&quot;</span>):
         outputstring = <span class="Identifier">False</span>
      <span class="Statement">elif</span> o <span class="Statement">in</span> (<span class="String">&quot;-t&quot;</span>, <span class="String">&quot;--tabdelimited&quot;</span>):
         tabdelimited = <span class="Identifier">True</span>
      <span class="Statement">elif</span> o <span class="Statement">in</span> (<span class="String">&quot;-h&quot;</span>, <span class="String">&quot;--help&quot;</span>):
         usage()
         sys.exit()
      <span class="Statement">elif</span> o <span class="Statement">in</span> (<span class="String">&quot;-n&quot;</span>, <span class="String">&quot;--number&quot;</span>):
         <span class="Statement">try</span>:
            <span class="Statement">if</span> a[<span class="Constant">0</span>] == <span class="String">&quot;=&quot;</span>:
               n = <span class="Identifier">int</span>(a[<span class="Constant">1</span>:])
            <span class="Statement">else</span>:
               n = <span class="Identifier">int</span>(a)
         <span class="Statement">except</span> <span class="Type">ValueError</span>:
            <span class="Identifier">print</span>(<span class="String">&quot;</span><span class="Special">\n</span><span class="String">Parameter of option -n or --number has to be an integer!</span><span class="Special">\n</span><span class="String">&quot;</span>)
            usage()
            sys.exit(<span class="Constant">2</span>)
      <span class="Statement">elif</span> o <span class="Statement">in</span> (<span class="String">&quot;-l&quot;</span>, <span class="String">&quot;--lefttoken&quot;</span>):
         <span class="Statement">if</span> a[<span class="Constant">0</span>] == <span class="String">&quot;=&quot;</span>:
            ltokens.append(a[<span class="Constant">1</span>:])
         <span class="Statement">else</span>:
            ltokens.append(a)
      <span class="Statement">elif</span> o <span class="Statement">in</span> (<span class="String">&quot;-r&quot;</span>, <span class="String">&quot;--righttoken&quot;</span>):
         <span class="Statement">if</span> a[<span class="Constant">0</span>] == <span class="String">&quot;=&quot;</span>:
            rtokens.append(a[<span class="Constant">1</span>:])
         <span class="Statement">else</span>:
            rtokens.append(a)
      <span class="Statement">elif</span> o <span class="Statement">in</span> (<span class="String">&quot;-s&quot;</span>, <span class="String">&quot;--stopwords&quot;</span>):
         stopwords = <span class="Identifier">True</span>
      <span class="Statement">elif</span> o <span class="Statement">in</span> (<span class="String">&quot;-p&quot;</span>, <span class="String">&quot;--punctuation&quot;</span>):
         punctuation = <span class="Identifier">True</span>
      <span class="Statement">elif</span> o <span class="Statement">in</span> (<span class="String">&quot;-c&quot;</span>, <span class="String">&quot;--containstoken&quot;</span>):
         <span class="Statement">if</span> a[<span class="Constant">0</span>] == <span class="String">&quot;=&quot;</span>:
            ctokens.append(a[<span class="Constant">1</span>:])
         <span class="Statement">else</span>:
            ctokens.append(a)
      <span class="Statement">else</span>:
         <span class="Statement">assert</span> <span class="Identifier">False</span>, <span class="String">&quot;unhandled option&quot;</span>
   model = {}
   <span class="Statement">for</span> i <span class="Statement">in</span> args:
      <span class="Statement">for</span> j <span class="Statement">in</span> glob.glob(i):
         main(os.path.expanduser(os.path.expandvars(j)), model, n)
   prettyPrint(model, outputstring, tabdelimited, ltokens, rtokens, ctokens, stopwords, punctuation)
</pre>

<script type="text/javascript">

	  var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-21704386-2']);
		   _gaq.push(['_trackPageview']);

			  (function() {
			      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
					    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
						     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
							    })();

							 </script>


</body>
</html>
