<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<meta name="author" content="Damir Ä†avar" />
		<meta name="language" content="en" />
		
		<title>Course: Statistics for linguistic research - R 2</title>
		<link rel="stylesheet" type="text/css" media="screen" href="../../rw_common/themes/blog/styles.css"  />
		<link rel="stylesheet" type="text/css" media="print" href="../../rw_common/themes/blog/print.css"  />
		<link rel="stylesheet" type="text/css" media="handheld" href="../../rw_common/themes/blog/handheld.css"  />
		<link rel="stylesheet" type="text/css" media="screen" href="../../rw_common/themes/blog/css/styles/blue.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="../../rw_common/themes/blog/css/width/width_variable.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="../../rw_common/themes/blog/css/sidebar/sidebar_right.css" />
		<link rel="stylesheet" type="text/css" media="screen" href="../../rw_common/themes/blog/css/header/header_center.css" />
		
		
		
		
		<script type="text/javascript" src="../../rw_common/themes/blog/javascript.js"></script>
		
		
		
		
	<!-- Start Google Analytics -->
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21704386-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script><!-- End Google Analytics -->
</head>
<body>
<div id="top_grad"></div>
<div id="container"><!-- Start container -->
	<div id="pageHeader"><!-- Start page header -->
		
		<h1>Course: Statistics for linguistic research</h1>
		<h2>Linguistics Department, <a href="http://www.unizd.hr/">University of Zadar</a></h2>
	</div><!-- End page header -->
	<div id="sidebarContainer"><!-- Start Sidebar wrapper -->
		<div id="navcontainer"><!-- Start Navigation -->
			<ul><li><a href="../../index.en.html" rel="self">Home</a></li><li><a href="../../material/index.en.html" rel="self" class="currentAncestor">Material</a><ul><li><a href="../../material/R/index.en.html" rel="self">R 1</a></li><li><a href="index.en.html" rel="self" id="current">R 2</a></li><li><a href="../../material/R3/index.en.html" rel="self">R 3</a></li></ul></li><li><a href="../../doc/index.en.html" rel="self">Files</a></li><li><a href="../../announcements/index.en.html" rel="self">Announcements</a></li></ul>
		</div><!-- End navigation -->
		<h1 class="sideHeader"></h1><!-- Sidebar header -->
		<div id="sidebar"><!-- Start sidebar content -->
		
			<p><br /><a href="index.hr.html">Hrvatski</a><br /></p><br /><center><script type="text/javascript"><!--
google_ad_client = "ca-pub-8896209246743797";
/* homepage-DC */
google_ad_slot = "6554587391";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></center> <br /><!-- sidebar content you enter in the page inspector -->
			 <!-- sidebar content such as the blog archive links -->
		</div><!-- End sidebar content -->
	</div><!-- End sidebar wrapper -->
	<div id="contentContainer"><!-- Start main content wrapper -->
		<div id="content"><!-- Start content -->
			<span style="font-size:15px; font-weight:bold; ">Translate equations to R</span><br />by <a href="http://cavar.me/damir/" rel="external">Damir Cavar</a> (March 2010)<br /><br /><strong><br /></strong>In this section we will take a look at how to translate some typical equation into R. Let us start with the formula for <a href="http://en.wikipedia.org/wiki/Variance" rel="external">variance</a>:<br /><br /><img class="imageStyle" alt="" src="files/latex-image-1.png" width="369" height="89" /><br /><br />The <a href="http://en.wikipedia.org/wiki/LaTeX" rel="external">LaTeX</a> code for the equation is: <span style="font:12px Courier, mono; ">S^2_{N-1}=\frac{1}{N-1}\sum_{i=1}^N{(x_i - \bar{x})^2}</span><br /><br />What this formula says is the following:<br /><br /><strong>a. Given a vector of values (some experimental results or measures) of length N, for example:</strong><br /><br /><span style="font:12px Courier, mono; ">x <- c(1, 2, 4, 5, 6, 8, 9)</span><br /><br />In this case, <span style="font:12px Courier, mono; ">x</span> is of length <span style="font:12px Courier, mono; ">7</span>, that is <span style="font:12px Courier, mono; ">N = 7</span>, which can be verified by using the following function in R:<br /><br /><span style="font:12px Courier, mono; ">length(x)</span><br /><br /><strong>b. for each value, from the beginning (index position </strong><span style="font:12px Courier, mono; font-weight:bold; font-weight:bold; ">i = 1</span><strong>), to the last element (index position </strong><span style="font:12px Courier, mono; font-weight:bold; font-weight:bold; ">i = N = 7</span><strong>),<br />subtract the arithmetic mean of the distribution from this value, and square the result:</strong><br /><br />The arithmetic mean of the distribution can be calculated using:<br /><br /><span style="font:12px Courier, mono; ">mean(x)</span><br /><br />The subtraction and squaring can be calculated as:<br /><br /><span style="font:12px Courier, mono; ">(x - mean(x))^2</span><br /><br />The resulting vector for x as defined above should look like:<br /><br /><span style="font:12px Courier, mono; ">16  9  1  0  1  9 16</span><br /><br /><strong>c. sum up all the resulting values, and divide the result by </strong><span style="font:12px Courier, mono; font-weight:bold; font-weight:bold; ">(N - 1)</span><strong>.</strong><br /><br />Summing up the values in a list can be achieved by using the function sum():<br /><br /><span style="font:12px Courier, mono; ">sum(x)</span><br /><br />The output for x as defined above should be:<br /><br /><span style="font:12px Courier, mono; ">35</span><br /><br />To complete our calculation using steps a. and b., the formula so far should be translated as:<br /><br /><span style="font:12px Courier, mono; ">sum( (x - mean(x))^2 )</span><br /><br />The output of this calculation for the defined <span style="font:12px Courier, mono; ">x</span> should be:<br /><br /><span style="font:12px Courier, mono; ">52</span><br /><br />The final step is to divide this part of the calculation result by <span style="font:12px Courier, mono; ">N</span>, which is the <span style="font:12px Courier, mono; ">length</span> of <span style="font:12px Courier, mono; ">x</span> reduced by <span style="font:12px Courier, mono; ">1</span>:<br /><br /><span style="font:12px Courier, mono; ">sum( (x - mean(x))^2 ) / (length(x) - 1)</span><br /><br />The resulting value:<br /><br /><span style="font:12px Courier, mono; ">8.666667</span><br /><br />is the variance of the measures in <span style="font:12px Courier, mono; ">x</span>, as defined above.<br /><br />We can define this calculation as a function, and store it in some external file for reuse. A function can be defined in the following way:<br /><br /><span style="font:12px Courier, mono; ">s2variance <- function (x) { sum( (x - mean(x))^2 ) / (length(x) - 1) }</span><br /><br /><span style="font:12px Courier, mono; ">s2variance</span> is now defined as a function that takes one parameter, i.e. a vector of values, measures or results. The returned value is the variance of the distribution, as explained above. For example:<br /><br /><span style="font:12px Courier, mono; ">s2variance( c(3, 5, 1, 1, 2, 1, 0, 4) )</span><br /><br />should return the value:<br /><br /><span style="font:12px Courier, mono; ">2.982143</span><br /><br />In fact, R comes with a predefined function for variance calculation, as explained in the previous section (the function <span style="font:12px Courier, mono; ">var</span>), such that:<br /><br /><span style="font:12px Courier, mono; ">var( c(3, 5, 1, 1, 2, 1, 0, 4) )</span><br /><br />should return the same value as our own function definition above, i.e.:<br /><br /><span style="font:12px Courier, mono; ">2.982143</span><br /><br />A variation of this equation is the variance of a population:<br /><br /><img class="imageStyle" alt="" src="files/latex-image-2.png" width="286" height="89" /><br /><br />The <a href="http://en.wikipedia.org/wiki/LaTeX" rel="external">LaTeX</a> code for this equation is: <span style="font:12px Courier, mono; ">S^2_N=\frac{1}{N}\sum_{i=1}^N{(x_i - \bar{x})^2}</span><br /><br />The only difference is that in this function we do not divide by the length of x minus 1, but just by the length of x, as in the following R code:<br /><br /><span style="font:12px Courier, mono; ">sum( (x - mean(x))^2 ) / length(x)</span><br /><br /><br />Let us consider now the equation for the <a href="http://en.wikipedia.org/wiki/Standard_deviation" rel="external">Standard deviation</a>:<br /><br /><img class="imageStyle" alt="" src="files/latex-image-3.png" width="241" height="89" /><br /><br />The <a href="http://en.wikipedia.org/wiki/LaTeX" rel="external">LaTeX</a> code for this equation is: <span style="font:12px Courier, mono; ">\sigma = \sqrt{ \frac{1}{N} \sum_{i=1}^N{ (x_i - \bar{x})^2 }}</span><span style="font:12px Monaco; "><br /></span><br />This equation is just the square root of the population variance. The corresponding R code is:<br /><br /><span style="font:12px Courier, mono; ">sqrt( sum( (x - mean(x))^2 ) / length(x) )</span><br /><br />To declare this code as a function for storage and reuse, just wrap it in a function declaration as:<br /><br /><span style="font:12px Courier, mono; ">sdd <- function (x) { sqrt( sum( (x - mean(x))^2 ) / length(x) )  }</span><br /><br />and use it as follows:<br /><br /><span style="font:12px Courier, mono; ">sdd(x)</span><br /><br />which should return:<br /><br /><span style="font:12px Courier, mono; ">2.725541</span><br /><br /><br />Let us consider a <a href="http://en.wikipedia.org/wiki/Random_variable" rel="external">random variable</a> X, represented here as a vector with probabilities:<br /><br /><span style="font:12px Courier, mono; ">x <- c(0.1, 0.3, 0.15, 0.25, 0.01, 0.08, 0.01, 0.06, 0.04)</span><br /><br />The vector <span style="font:12px Courier, mono; ">x</span> in this case is a complete list of event probabilities, such that the sum of all probabilities in <span style="font:12px Courier, mono; ">x</span> is equal to <span style="font:12px Courier, mono; ">1</span>, as can be verified with the following R code:<br /><br /><span style="font:12px Courier, mono; ">sum(x)</span><br /><br />Now, the <a href="http://en.wikipedia.org/wiki/Entropy_%28information_theory%29" rel="external">(Shannon) entropy</a> H(x) is defined as:<br /><br /><img class="imageStyle" alt="" src="files/latex-image-4.png" width="398" height="89" /><br /><br />The <a href="http://en.wikipedia.org/wiki/LaTeX" rel="external">LaTeX</a> code for this equation is: <span style="font:12px Courier, mono; ">H(X) = -\sum_{i=1}^n{p(x_i)log_b p(x_i)}</span><span style="font:12px Monaco; "><br /></span><br />The equation says that all probabilities of events for the random variable <span style="font:12px Courier, mono; ">X</span> have to be multiplied with the logarithm of them, summarized and multiplied by <span style="font:12px Courier, mono; ">-1</span>. We use here the logarithm to the base of <span style="font:12px Courier, mono; ">2</span>, which is in R:<br /><br /><span style="font:12px Courier, mono; ">log2(x)</span><br /><br />Thus, given that the vector x contains probabilities, the multiplication of each single probability with the log to the base of two of it, is in R:<br /><br /><span style="font:12px Courier, mono; ">x * log2(x)</span><br /><br />For x as defined above, the resulting list should look like:<br /><br /><span style="font:12px Courier, mono; ">-0.33219281 -0.52108968 -0.41054484 -0.50000000 -0.06643856 -0.29150850 -0.06643856 -0.24353362 -0.18575425</span><br /> <br />Summing up the values in the resulting list can be achieved by the function <span style="font:12px Courier, mono; ">sum</span>:<br /><br /><span style="font:12px Courier, mono; ">sum(x * log2(x))</span><br /><br />and the absolute value of this summation is returned by multiplying with <span style="font:12px Courier, mono; ">-1</span>:<br /><br /><span style="font:12px Courier, mono; ">-sum(x * log2(x))</span><br /><br />By the way, the initial sum is always negative, because the log of a probability is always negative, given that a probability is between <span style="font:12px Courier, mono; ">0</span> and <span style="font:12px Courier, mono; ">1</span>.<br /><br /><br />
		</div><!-- End content -->
	</div><!-- End main content wrapper -->
	<div class="clearer"></div>
</div><!-- End container -->
<div id="footer"><!-- Start Footer -->
	<div id="breadcrumbcontainer"><!-- Start the breadcrumb wrapper -->
		<ul><li><a href="../../index.en.html">Home</a>&nbsp;|&nbsp;</li><li><a href="../../material/index.en.html">Material</a>&nbsp;|&nbsp;</li><li><a href="index.en.html">R 2</a>&nbsp;|&nbsp;</li></ul>
	</div><!-- End breadcrumb -->
	<p>&copy; 2009 Damir Cavar <a href="#" id="rw_email_contact">Write me</a><script type="text/javascript">var _rwObsfuscatedHref0 = "mai";var _rwObsfuscatedHref1 = "lto";var _rwObsfuscatedHref2 = ":dc";var _rwObsfuscatedHref3 = "ava";var _rwObsfuscatedHref4 = "r@m";var _rwObsfuscatedHref5 = "e.c";var _rwObsfuscatedHref6 = "om";var _rwObsfuscatedHref = _rwObsfuscatedHref0+_rwObsfuscatedHref1+_rwObsfuscatedHref2+_rwObsfuscatedHref3+_rwObsfuscatedHref4+_rwObsfuscatedHref5+_rwObsfuscatedHref6; document.getElementById('rw_email_contact').href = _rwObsfuscatedHref;</script></p>
</div><!-- End Footer -->

</body>
</html>
